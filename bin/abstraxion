#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.expand_path(File.join(File.dirname(__FILE__),".." , "lib")))
require 'abstraxion'
include Abstraxion

ASSET_SIZE = 100
NODE_SIZE = 100.0
WINDOW_H = 720
WINDOW_W = 1280
FACTOR = NODE_SIZE/ASSET_SIZE

class Game < Chingu::Window
  def initialize

    media_dir = File.expand_path(File.join('media'))
    Image.autoload_dirs.unshift File.join(media_dir, 'images')

    super(WINDOW_W, WINDOW_H, false)

    $size = FACTOR
    $node_size = NODE_SIZE * $size
    $delay = 10
    $tower = MapAbxn::Tower.new(5,5)
    $generator = MapAbxn::Generator.new(4, $tower)

    push_game_state(Menu)
  end
end

Game.new.show

